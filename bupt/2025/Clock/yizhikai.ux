<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML 时钟</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            transition: background-color 0.3s;
        }
        .dark-mode {
            background-color: #1a1d23;
        }
        .light-mode {
            background-color: #f5f7fa;
        }
        .toolbar {
            width: 100%;
            max-width: 500px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .digital-time {
            font-size: 36px;
            font-weight: 600;
            transition: color 0.3s;
        }
        .dark-mode .digital-time {
            color: #ffffff;
        }
        .light-mode .digital-time {
            color: #20232a;
        }
        .theme-toggle {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .dark-mode .theme-toggle {
            background-color: rgba(255, 255, 255, 0.08);
        }
        .light-mode .theme-toggle {
            background-color: rgba(0, 0, 0, 0.08);
        }
        .toggle-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 12px;
            transition: background-color 0.3s;
        }
        .dark-mode .toggle-indicator {
            background-color: #ffffff;
        }
        .light-mode .toggle-indicator {
            background-color: #20232a;
        }
        .toggle-label {
            font-size: 16px;
            transition: color 0.3s;
        }
        .dark-mode .toggle-label {
            color: #ffffff;
        }
        .light-mode .toggle-label {
            color: #20232a;
        }
        .ctx {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            border-radius: 15px;
            transition: background-color 0.3s;
        }
        .dark-mode .ctx {
            background-color: rgb(24, 28, 35);
        }
        .light-mode .ctx {
            background-color: rgb(240, 244, 250);
        }
        #myClock {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 50%;
            border-width: 3px;
            border-style: solid;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .dark-mode #myClock {
            border-color: rgba(255, 255, 255, 0.5);
            background-color: #000000;
        }
        .light-mode #myClock {
            border-color: rgba(0, 0, 0, 0.2);
            background-color: #ffffff;
        }
    </style>
</head>
<body class="dark-mode">
    <div class="toolbar">
        <div class="digital-time" id="digitalTime">00:00:00</div>
        <div class="theme-toggle" id="themeToggle">
            <div class="toggle-indicator"></div>
            <div class="toggle-label" id="toggleLabel">Light Mode</div>
        </div>
    </div>
    <div class="ctx">
        <canvas id="myClock" width="500" height="500"></canvas>
    </div>

    <script>
        // 全局配置
        const config = {
            themes: {
                dark: {
                    tick: 'rgba(255, 255, 255, 0.6)',
                    text: '#ffffff',
                    accent: '#fa0101'
                },
                light: {
                    tick: 'rgba(0, 0, 0, 0.4)',
                    text: '#20232a',
                    accent: '#fa0101'
                }
            },
            clockSize: 500,
            timer: null
        };

        // DOM元素
        const canvas = document.getElementById('myClock');
        const ctx = canvas.getContext('2d');
        const digitalTimeEl = document.getElementById('digitalTime');
        const themeToggleEl = document.getElementById('themeToggle');
        const toggleLabelEl = document.getElementById('toggleLabel');
        let currentTheme = 'dark';

        // 初始化
        function init() {
            setCanvasSize();
            drawClock();
            startTimer();
            bindEvents();
        }

        // 设置Canvas尺寸（响应式）
        function setCanvasSize() {
            const container = document.querySelector('.ctx');
            const maxSize = Math.min(container.clientWidth - 48, config.clockSize);
            canvas.width = maxSize;
            canvas.height = maxSize;
        }

        // 绘制时钟
        function drawClock() {
            const theme = config.themes[currentTheme];
            const width = canvas.width;
            const height = canvas.height;
            const radius = Math.min(width, height) / 2;

            // 重置画布
            ctx.clearRect(0, 0, width, height);
            ctx.save();
            ctx.translate(width / 2, height / 2);

            // 绘制刻度
            drawTicks(radius, theme);

            // 绘制数字
            drawNumbers(radius, theme);

            // 获取当前时间
            const now = new Date();
            let hour = now.getHours();
            const minute = now.getMinutes();
            const second = now.getSeconds();

            // 更新数字时间显示
            updateDigitalTime(now);

            // 处理12小时制
            hour = hour > 12 ? hour - 12 : hour;

            // 绘制指针
            drawHand(
                Math.PI * 2 * (3 - (hour + minute / 60)) / 12,
                radius * 0.5,
                12,
                theme.text
            );
            drawHand(
                Math.PI * 2 * (15 - (minute + second / 60)) / 60,
                radius * 0.7,
                8,
                theme.text
            );
            drawHand(
                Math.PI * 2 * (15 - second) / 60,
                radius * 0.85,
                2,
                theme.accent
            );

            // 绘制中心圆点
            drawCenterDot(theme);

            ctx.restore();
        }

        // 绘制刻度
        function drawTicks(radius, theme) {
            const hourTickLen = radius * 0.1;
            const minuteTickLen = radius * 0.05;

            for (let i = 0; i < 60; i++) {
                const angle = (Math.PI * 2 * i) / 60;
                const isHourTick = i % 5 === 0;
                const tickLen = isHourTick ? hourTickLen : minuteTickLen;

                ctx.beginPath();
                ctx.moveTo(
                    (radius - tickLen) * Math.cos(angle),
                    -(radius - tickLen) * Math.sin(angle)
                );
                ctx.lineTo(
                    radius * Math.cos(angle),
                    -radius * Math.sin(angle)
                );
                ctx.strokeStyle = theme.tick;
                ctx.lineWidth = isHourTick ? 4 : 2;
                ctx.stroke();
            }
        }

        // 绘制数字
        function drawNumbers(radius, theme) {
            const textRadius = radius * 0.85;
            ctx.font = `${radius * 0.12}px Arial`;
            ctx.fillStyle = theme.text;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            for (let i = 1; i <= 12; i++) {
                const angle = Math.PI * 2 * (3 - i) / 12;
                const x = textRadius * Math.cos(angle);
                const y = -textRadius * Math.sin(angle);
                ctx.fillText(i, x, y);
            }
        }

        // 绘制指针
        function drawHand(angle, length, width, color) {
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(
                length * Math.cos(angle),
                -length * Math.sin(angle)
            );
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.lineCap = 'round';
            ctx.stroke();
        }

        // 绘制中心圆点
        function drawCenterDot(theme) {
            ctx.beginPath();
            ctx.arc(0, 0, 6, 0, Math.PI * 2);
            ctx.fillStyle = theme.accent;
            ctx.fill();
        }

        // 更新数字时间
        function updateDigitalTime(date) {
            const hour = padZero(date.getHours());
            const minute = padZero(date.getMinutes());
            const second = padZero(date.getSeconds());
            digitalTimeEl.textContent = `${hour}:${minute}:${second}`;
        }

        // 补零函数
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }

        // 启动定时器
        function startTimer() {
            if (config.timer) clearInterval(config.timer);
            config.timer = setInterval(drawClock, 1000);
        }

        // 绑定事件
        function bindEvents() {
            // 明暗模式切换
            themeToggleEl.addEventListener('click', () => {
                currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.body.className = currentTheme + '-mode';
                toggleLabelEl.textContent = currentTheme === 'dark' ? 'Light Mode' : 'Dark Mode';
                drawClock();
            });

            // 窗口大小变化时调整画布
            window.addEventListener('resize', setCanvasSize);
        }

        // 启动应用
        window.addEventListener('load', init);
    </script>
</body>
</html>